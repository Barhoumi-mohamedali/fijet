(()=>{var e={251:(e,t,a)=>{"use strict";var n=a(196),l=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,a){var n,i={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,n)&&!s.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:l,type:e,key:c,ref:d,props:i,_owner:o.current}}t.jsx=i,t.jsxs=i},893:(e,t,a)=>{"use strict";e.exports=a(251)},196:e=>{"use strict";e.exports=window.React},967:(e,t)=>{var a;!function(){"use strict";var n={}.hasOwnProperty;function l(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=o(e,r(a)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)n.call(e,a)&&e[a]&&(t=o(t,a));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(l.default=l,e.exports=l):void 0===(a=function(){return l}.apply(t,[]))||(e.exports=a)}()}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=a(196),t=a.n(e);const n=window.wp.blocks,l=window.wp.i18n,r=window.wp.blockEditor,o=window.wp.components;var s=a(967),i=a.n(s),c=a(893);const d=e.createContext({prefixes:{},breakpoints:["xxl","xl","lg","md","sm","xs"],minBreakpoint:"xs"}),{Consumer:m,Provider:u}=d;void 0!==a.g&&a.g.navigator&&a.g.navigator.product,new WeakMap;const g=["as","disabled"];function p({tagName:e,disabled:t,href:a,target:n,rel:l,role:r,onClick:o,tabIndex:s=0,type:i}){e||(e=null!=a||null!=n||null!=l?"a":"button");const c={tagName:e};if("button"===e)return[{type:i||"button",disabled:t},c];const d=n=>{(t||"a"===e&&function(e){return!e||"#"===e.trim()}(a))&&n.preventDefault(),t?n.stopPropagation():null==o||o(n)};return"a"===e&&(a||(a="#"),t&&(a=void 0)),[{role:null!=r?r:"button",disabled:void 0,tabIndex:t?void 0:s,href:a,target:"a"===e?n:void 0,"aria-disabled":t||void 0,rel:"a"===e?l:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},c]}e.forwardRef(((e,t)=>{let{as:a,disabled:n}=e,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,g);const[r,{tagName:o}]=p(Object.assign({tagName:a,disabled:n},l));return(0,c.jsx)(o,Object.assign({},l,r,{ref:t}))})).displayName="Button";const h=["onKeyDown"],y=e.forwardRef(((t,a)=>{let{onKeyDown:n}=t,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(t,h);const[r]=p(Object.assign({tagName:"a"},l)),o=function(t){const a=function(t){const a=(0,e.useRef)(t);return(0,e.useEffect)((()=>{a.current=t}),[t]),a}((e=>{r.onKeyDown(e),null==n||n(e)}));return(0,e.useCallback)((function(...e){return a.current&&a.current(...e)}),[a])}();return(s=l.href)&&"#"!==s.trim()&&"button"!==l.role?(0,c.jsx)("a",Object.assign({ref:a},l,{onKeyDown:n})):(0,c.jsx)("a",Object.assign({ref:a},l,r,{onKeyDown:o}));var s}));y.displayName="Anchor";const v=y,f=e.forwardRef((({active:e=!1,disabled:t=!1,className:a,style:n,activeLabel:l="(current)",children:r,linkStyle:o,linkClassName:s,as:d=v,...m},u)=>{const g=e||t?"span":d;return(0,c.jsx)("li",{ref:u,style:n,className:i()(a,"page-item",{active:e,disabled:t}),children:(0,c.jsxs)(g,{className:i()("page-link",s),style:o,...m,children:[r,e&&l&&(0,c.jsx)("span",{className:"visually-hidden",children:l})]})})}));f.displayName="PageItem";const _=f;function E(t,a,n=t){const l=e.forwardRef((({children:e,...t},l)=>(0,c.jsxs)(f,{...t,ref:l,children:[(0,c.jsx)("span",{"aria-hidden":"true",children:e||a}),(0,c.jsx)("span",{className:"visually-hidden",children:n})]})));return l.displayName=t,l}const b=E("First","«"),w=E("Prev","‹","Previous"),C=E("Ellipsis","…","More"),x=E("Next","›"),N=E("Last","»"),P=e.forwardRef((({bsPrefix:t,className:a,size:n,...l},r)=>{const o=function(t,a){const{prefixes:n}=(0,e.useContext)(d);return t||n[a]||a}(t,"pagination");return(0,c.jsx)("ul",{ref:r,...l,className:i()(a,o,n&&`${o}-${n}`)})}));P.displayName="Pagination";const S=Object.assign(P,{First:b,Prev:w,Ellipsis:C,Item:_,Next:x,Last:N});var T=function(e){var a=e.page,n=void 0===a?1:a,l=e.between,r=void 0===l?3:l,o=e.total,s=e.limit,i=e.changePage,c=void 0===i?function(e){return console.log(e)}:i,d=e.next,m=void 0===d||d,u=e.last,g=void 0!==u&&u,p=e.ellipsis,h=void 0===p?0:p,y=Math.ceil(o/s);r=r<1?1:r,n=n<1?1:n>y?y:n,h=h<1?0:h+2>=r?r-2:h;var v=Array.from({length:y},(function(e,t){return t})),f=2*r+1,_=y<=f?v:n-1<=r?v.slice(0,f-(h>0?h+1:0)):n+r>=y?v.slice(y-f+(h>0?h+1:0),y):v.slice(n-1-(r-(h>0?h+1:0)),n+(r-(h>0?h+1:0)));return null!==o&&o>0?t().createElement(S,{className:"justify-content-md-center"},g&&t().createElement(S.First,{onClick:function(){return n>1?c(1):{}},disabled:n<=1}),m&&t().createElement(S.Prev,{onClick:function(){return n>1?c(n-1):{}},disabled:n<=1}),y>2*r+1&&h>0&&v.slice(0,n-1<=r?0:h).map((function(e){return t().createElement(S.Item,{key:e,onClick:function(){return e!==n-1?c(e+1):{}}},e+1)})),y>2*r+1&&h>0&&n-1>r&&t().createElement(S.Ellipsis,{disabled:!0}),_.map((function(e){return t().createElement(S.Item,{active:e===n-1,key:e,onClick:function(){return e!==n-1?c(e+1):{}}},e+1)})),y>2*r+1&&h>0&&n<y-r&&t().createElement(S.Ellipsis,{disabled:!0}),y>2*r+1&&h>0&&v.slice(n>=y-r?y:y-h,y).map((function(e){return t().createElement(S.Item,{key:e,onClick:function(){return e!==n-1?c(e+1):{}}},e+1)})),m&&t().createElement(S.Next,{onClick:function(){return n<y?c(n+1):{}},disabled:n>=y}),g&&t().createElement(S.Last,{onClick:function(){return n<y?c(y):{}},disabled:n>=y})):t().createElement(t().Fragment,null)};const k=window.wp.primitives,I=(0,e.createElement)(k.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(k.Path,{d:"m21.5 9.1-6.6-6.6-4.2 5.6c-1.2-.1-2.4.1-3.6.7-.1 0-.1.1-.2.1-.5.3-.9.6-1.2.9l3.7 3.7-5.7 5.7v1.1h1.1l5.7-5.7 3.7 3.7c.4-.4.7-.8.9-1.2.1-.1.1-.2.2-.3.6-1.1.8-2.4.6-3.6l5.6-4.1zm-7.3 3.5.1.9c.1.9 0 1.8-.4 2.6l-6-6c.8-.4 1.7-.5 2.6-.4l.9.1L15 4.9 19.1 9l-4.9 3.6z"})),L=({paginatedData:t,numPostsToShow:a,showImgToggler:n,showPostTitle:l,showMeta:r,showContent:o,contentType:s,truncateContent:i,wordsLimit:c,imageUrl:d,valueForWidth:m,widthPercentage:u,widthController:g,ImgWidth:p,height:h,__})=>{const[y,v]=(0,e.useState)(0),f=t.slice(0,a);return(0,e.useEffect)((()=>{const e=setInterval((()=>{v((e=>(e+1)%f.length))}),3e3);return()=>clearInterval(e)}),[f.length]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"slider-container"},(0,e.createElement)("div",{className:"slider"},f.map(((t,a)=>{const v=new Date(t?.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),f=t.featured_image_url&&"object"==typeof t.featured_image_url&&Object.keys(t.featured_image_url).length>0;return(0,e.createElement)("div",{key:t.id,className:"slide "+(a===y?"active":""),style:{display:a===y?"block":"none"}},(0,e.createElement)("div",{className:"post-container"},n&&t.featured_image_url&&f&&(0,e.createElement)("div",{className:"image-container"},(0,e.createElement)("img",{className:"block-image",src:t.featured_image_url[d],style:{...m?{maxWidth:u,maxHeight:u}:{maxWidth:g?p:"",maxHeight:g?h:""}},alt:t.title.rendered})),l&&(0,e.createElement)("div",{className:"post-title"},(0,e.createElement)("a",{className:"title",href:t.link,dangerouslySetInnerHTML:{__html:t.title.rendered}})),r&&(0,e.createElement)("div",{className:"meta-data"},(0,e.createElement)("p",null,v&&`${v} `,t.post_author&&`| Author: ${t.post_author} `,t.assigned_categories&&`| Categories: ${t.assigned_categories} `)),o&&(0,e.createElement)("div",{className:"post-content",dangerouslySetInnerHTML:{__html:"Full-Post"===s?t.content.rendered:t.excerpt?.rendered?i(t.excerpt.rendered,c):i(t.content.rendered,c)}}),(0,e.createElement)("div",{className:"read-more-btn"},(0,e.createElement)("a",{href:t.link,target:"_blank",className:"read-more-button",onMouseEnter:e=>e.target.style.backgroundColor="#333",onMouseLeave:e=>e.target.style.backgroundColor="black"},(0,e.createElement)("span",{style:{color:"inherit"}},__("Read more","advanced-posts-listing"))))))}))),(0,e.createElement)("button",{className:"slider-button prev",onClick:()=>{v((e=>(e-1+f.length)%f.length))}},"❮"),(0,e.createElement)("button",{className:"slider-button next",onClick:()=>{v((e=>(e+1)%f.length))}},"❯")))},O=({paginatedData:t,numPostsToShow:a,showImgToggler:n,showPostTitle:l,showMeta:r,showContent:o,contentType:s,truncateContent:i,wordsLimit:c,imageUrl:d,valueForWidth:m,widthPercentage:u,widthController:g,ImgWidth:p,height:h,columnGap:y,rowGap:v,totalColoms:f,__})=>{const _=t.slice(0,a),E=e=>{const t=window.innerWidth;return t>=992&&t<1200||t>=1200?`repeat(${e||1}, 1fr)`:void 0},[b,w]=(0,e.useState)(E());return(0,e.useEffect)((()=>{const e=()=>{w(E(f))};return window.addEventListener("resize",e),w(E(f)),()=>{window.removeEventListener("resize",e)}}),[f]),(0,e.createElement)("div",{className:"grid-layout",style:{columnGap:y||"20px",rowGap:v||"20px",gridTemplateColumns:b}},_.map((t=>{const a=new Date(t?.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});let y=!1;if(t.hasOwnProperty("featured_image_url")){const e=t.featured_image_url;e&&"object"==typeof e&&Object.keys(e).length>0&&(y=!0)}return(0,e.createElement)("div",{key:t.id,className:"post-container"},y&&(0,e.createElement)("div",{className:"image-container"},n&&t?.featured_image_url&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("img",{className:"block-image",src:t.featured_image_url[d],style:{...m?{maxWidth:u,maxHeight:u}:{maxWidth:!0===g?p:"",maxHeight:!0===g?h:""}},alt:t.title.rendered}),t.assigned_categories&&(0,e.createElement)("span",{className:"category-tag",style:{position:"absolute",bottom:"10px",left:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 10px",borderRadius:"4px"}},t.assigned_categories))),l&&(0,e.createElement)("div",{className:"post-title"},(0,e.createElement)("a",{className:"title",href:t.link,dangerouslySetInnerHTML:{__html:t?.title.rendered}})),r&&(0,e.createElement)("div",{className:"meta-data"},(0,e.createElement)("p",null,a&&`${a} `,t.post_author&&`| Author: ${t.post_author}`)),o&&(0,e.createElement)("div",{className:"post-content",dangerouslySetInnerHTML:{__html:"Full-Post"===s?t?.content?.rendered:i(t?.excerpt?.rendered?t?.excerpt?.rendered:t?.content?.rendered,c)}}),(0,e.createElement)("div",{className:"read-more-btn"},(0,e.createElement)("a",{href:t.link,target:"_blank",className:"read-more-button"},(0,e.createElement)("span",{style:{color:"inherit"}},__("Read more","advanced-posts-listing")))))})))},j=({paginatedData:t,numPostsToShow:a,showImgToggler:n,showPostTitle:l,showMeta:r,showContent:o,contentType:s,truncateContent:i,wordsLimit:c,imageUrl:d,valueForWidth:m,widthPercentage:u,widthController:g,ImgWidth:p,height:h,columnGap:y,rowGap:v,totalColoms:f,__})=>{const[_,E]=(0,e.useState)(1),b=()=>{const e=window.innerWidth;let t=f||1;e<=575?t=1:e>=576&&e<992?t=2:e>=992&&e<1200?t=f||3:e>=1200&&(t=f||4),E(t)};(0,e.useEffect)((()=>(b(),window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)})),[f]);const w=t.slice(0,a);return(0,e.createElement)("div",{className:"masonry-layout",style:{columnGap:y||"20px",columnCount:_}},w.map((t=>{const a=new Date(t?.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});let y=!1;if(t.hasOwnProperty("featured_image_url")){const e=t.featured_image_url;e&&"object"==typeof e&&Object.keys(e).length>0&&(y=!0)}return(0,e.createElement)("div",{key:t.id,className:"post-container",style:{marginBottom:v||"20px"}},n&&t?.featured_image_url&&y&&(0,e.createElement)("div",{className:"image-container"},(0,e.createElement)("img",{className:"block-image",src:t.featured_image_url[d],style:{...m?{maxWidth:u,maxHeight:u}:{maxWidth:!0===g?p:"",maxHeight:!0===g?h:""}}}),t.assigned_categories&&(0,e.createElement)("span",{className:"category-tag",style:{position:"absolute",bottom:"10px",left:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",padding:"5px 10px",borderRadius:"4px"}},t.assigned_categories)),l&&(0,e.createElement)("div",{className:"post-title"},(0,e.createElement)("a",{className:"title",href:t.link,dangerouslySetInnerHTML:{__html:t?.title.rendered}})),r&&(0,e.createElement)("div",{className:"meta-data"},(0,e.createElement)("p",null,a&&`${a} `,t.post_author&&`| Author: ${t.post_author} `,t.assigned_categories&&`| Categories: ${t.assigned_categories} `)),o&&(0,e.createElement)("div",{className:"post-content",dangerouslySetInnerHTML:{__html:"Full-Post"===s?t?.content?.rendered:i(t?.excerpt?.rendered?t?.excerpt?.rendered:t?.content?.rendered,c)}}),(0,e.createElement)("div",{className:"read-more-btn"},(0,e.createElement)("a",{href:t.link,target:"_blank",className:"read-more-button"},(0,e.createElement)("span",{style:{color:"inherit"}},__("Read more","advanced-posts-listing")))))})))},D=({paginatedData:t,numPostsToShow:a,showImgToggler:n,showPostTitle:l,showMeta:r,showContent:o,contentType:s,truncateContent:i,wordsLimit:c,imageUrl:d,valueForWidth:m,widthPercentage:u,widthController:g,ImgWidth:p,height:h,columnGap:y,rowGap:v,totalColoms:f,__})=>{const _=t.slice(0,a);return(0,e.createElement)("div",{className:"overlay-layout",style:{columnGap:y||"20px",rowGap:v||"20px"}},_.map((t=>{const a=new Date(t?.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});let y=!1;if(t.hasOwnProperty("featured_image_url")){const e=t.featured_image_url;e&&"object"==typeof e&&Object.keys(e).length>0&&(y=!0)}const v=e=>{const t=window.innerWidth;return t>=992&&t<1200||t>=1200?`calc(${100/e}% - 20px)`:void 0},[_,E]=(0,e.useState)(v());return(0,e.useEffect)((()=>{const e=()=>{E(v(f))};return window.addEventListener("resize",e),E(v(f)),()=>{window.removeEventListener("resize",e)}}),[f]),(0,e.createElement)("div",{key:t.id,className:"post-container",style:{width:_}},n&&t?.featured_image_url&&y&&(0,e.createElement)("div",{className:"image-container",style:{backgroundImage:`url(${t.featured_image_url[d]})`,...m?{maxWidth:u,maxHeight:u}:{maxWidth:!0===g?p:"",maxHeight:!0===g?h:""}}},(0,e.createElement)("div",{className:"overlay"},(0,e.createElement)("div",{className:"overlay-content"},l&&(0,e.createElement)("div",{className:"post-title"},(0,e.createElement)("a",{className:"title",href:t.link,dangerouslySetInnerHTML:{__html:t?.title.rendered}})),r&&(0,e.createElement)("div",{className:"meta-data"},(0,e.createElement)("p",null,a&&`${a} `,t.post_author&&`| Author: ${t.post_author} `,t.assigned_categories&&`| Categories: ${t.assigned_categories} `)),o&&(0,e.createElement)("div",{className:"post-content",dangerouslySetInnerHTML:{__html:"Full-Post"===s?t?.content?.rendered:i(t?.excerpt?.rendered?t?.excerpt?.rendered:t?.content?.rendered,c)}}),(0,e.createElement)("div",{className:"read-more-btn"},(0,e.createElement)("a",{href:t.link,target:"_blank",className:"read-more-button"},(0,e.createElement)("span",{style:{color:"inherit"}},__("Read more","advanced-posts-listing"))))))))})))},$=({paginatedData:t,numPostsToShow:a,showImgToggler:n,showPostTitle:l,showMeta:r,showContent:o,contentType:s,truncateContent:i,wordsLimit:c,imageUrl:d,valueForWidth:m,widthPercentage:u,widthController:g,ImgWidth:p,height:h,rowGap:y,__})=>{const v=t.slice(0,a);return(0,e.createElement)("div",{className:"listing-layout"},v.map((t=>{const a=new Date(t?.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});let v=!1;if(t.hasOwnProperty("featured_image_url")){const e=t.featured_image_url;e&&"object"==typeof e&&Object.keys(e).length>0&&(v=!0)}return(0,e.createElement)("div",{key:t.id,className:"post-container",style:{marginBottom:y}},n&&t?.featured_image_url&&v&&(0,e.createElement)("div",{className:"image-container"},(0,e.createElement)("img",{className:"block-image",src:t.featured_image_url[d],style:{...m?{maxWidth:u,maxHeight:u}:{maxWidth:!0===g?p:"",maxHeight:!0===g?h:""}},alt:t.title.rendered})),l&&(0,e.createElement)("div",{className:"post-title"},(0,e.createElement)("a",{className:"title",href:t.link,dangerouslySetInnerHTML:{__html:t?.title.rendered}})),r&&(0,e.createElement)("div",{className:"meta-data"},(0,e.createElement)("p",null,a&&`${a} `,t.post_author&&`| Author: ${t.post_author} `,t.assigned_categories&&`| Categories: ${t.assigned_categories} `)),o&&(0,e.createElement)("div",{className:"post-content",dangerouslySetInnerHTML:{__html:"Full-Post"===s?t?.content?.rendered:i(t?.excerpt?.rendered?t?.excerpt?.rendered:t?.content?.rendered,c)}}),(0,e.createElement)("div",{className:"read-more-btn"},(0,e.createElement)("a",{href:t.link,target:"_blank",className:"read-more-button"},(0,e.createElement)("span",{style:{color:"inherit"}},__("Read more","advanced-posts-listing")))))})))},A=JSON.parse('{"u2":"advanced-posts-listing/advanced-posts-listing-block"}'),W=(0,e.createElement)("span",{class:"dashicons dashicons-excerpt-view"});(0,n.registerBlockType)(A.u2,{icon:W,edit:function({attributes:t,setAttributes:a}){const{showImgToggler:n,showContent:s,showMeta:i,showPostTitle:c,numPostsToShow:d,selectedCustomPostType:m,wordsLimit:u,widthPercentage:g,valueForWidth:p,customTaxonomyPosts:h,sortBy:y,imageUrl:v,ImgWidth:f,height:_,contentType:E,widthController:b,totalColoms:w,columnGap:C,rowGap:x,PaginationOnToggler:N,prevName:P,nextName:S,commaSeparatedIds:k,RemoveCommaSeparatedIds:A,selectedLayout:W,paginationAline:G}=t,[R,F]=(0,e.useState)(1),M=d,[B,H]=(0,e.useState)(!1),[U,z]=(0,e.useState)("tab1"),[J,Z]=(0,e.useState)([]),{data:K,setData:Y,fetchCustomTaxonomyIdsBytermName:V,handleSelectedCustomPostType:X,fetchPostsByIds:q,customPostsOptionsResponse:Q,isLoading:ee}=(({attributes:t,setAttributes:a})=>{const{updatedCptIds:n,customTaxonomyPosts:l,selectedCustomPostType:r,commaSeparatedIds:o,RemoveCommaSeparatedIds:s,selectedLayout:i}=t,[c,d]=(0,e.useState)(""),[m,u]=(0,e.useState)([]),[g]=(0,e.useState)(aplb_server_data?.rest_url),[p,h]=(0,e.useState)(!1),[y,v]=(0,e.useState)([]);(0,e.useEffect)((()=>{0===o.length&&0===n.length&&_()}),[r,n,o,s]),(0,e.useEffect)((()=>{f()}),[]);const f=async()=>{try{const e=await fetch(`${g}wpppro/v1/list-cpt`),t=await e.json();v(t)}catch(e){console.error("Error fetching data:",e)}},_=async()=>{h(!0);try{let e=r.toLowerCase();const t=g.includes("?")?"&":"?";let a=`${g}wp/v2/${e}${t}per_page=100`;const n=await fetch(a);if(!n.ok)throw new Error(`Failed to fetch data (${n.status} ${n.statusText})`);const l=await n.json(),o=Array.isArray(l)?l:[l];r&&u(o)}catch(e){console.error("Error fetching data:",e)}finally{h(!1)}};(0,e.useEffect)((()=>{0===o.length&&E(n)}),[n,o,s]);const E=async e=>{try{const t=new Set,a=e.map((async({ids:e,taxonomyType:a})=>{let n=r.toLowerCase();const l=await fetch(`${g}wp/v2/${n}?${a}=${e}`);if(!l.ok)throw new Error(`Failed to fetch posts for IDs: ${termIdsArray.join(",")}`);const o=(await l.json()).filter((e=>!t.has(e.id)));return o.forEach((e=>t.add(e.id))),o})),n=(await Promise.all(a)).reduce(((e,t)=>e.concat(t)),[]),l=n.filter((t=>e.every((({taxonomyType:e,ids:a})=>t[e]&&t[e].includes(a)))));JSON.stringify(l)!==JSON.stringify(m)&&(l.length>0?u(l):u([]))}catch(e){console.error("Error fetching posts by custom taxonomy:",e)}};return{isLoading:p,data:m,setData:u,fetchCptList:f,fetchCustomTaxonomyIdsBytermName:async(e,l)=>{const r="customTaxonomyPosts";let o=1,s=[];const i=g.includes("?")?"&":"?";try{for(;;){const t=await fetch(`${g}wp/v2/${l}${i}page=${o}&per_page=100`);if(!t.ok)throw new Error("Failed to fetch custom taxonomies");const a=await t.json();for(const t of e){const e=a.find((e=>e.name===t));if(!e)return;s.push(e.id)}if(s.length>0||a.length<100)break;o++}const c=n?.filter((e=>e.taxonomyType!==l));s.forEach((e=>{c.push({ids:e,taxonomyType:l})}));const d={...t[r],[l]:e};a({...t,[r]:d,updatedCptIds:c})}catch(e){console.error("Error fetching custom taxonomy data:",e)}},handleSelectedCustomPostType:e=>{d(e);const n={...l};Object.keys(n).forEach((e=>{delete n[e]})),a({...t,selectedCustomPostType:e,customTaxonomyPosts:n,updatedCptIds:[]})},fetchPostsBySelectedCustomPostsType:_,fetchPostsByIds:async()=>{try{const e=`${g}wpppro/v1/get-post-by-id?id=${o}`,t=await fetch(e),a=await t.json();JSON.stringify(a)!==JSON.stringify(m)&&u(a)}catch(e){console.error("Error fetching posts by IDs:",e)}},currentSelectedCpt:c,customPostsOptionsResponse:y}})({attributes:t,setAttributes:a}),{handleAlignmentChange:te,handleWidthChange:ae,handleResolutionChange:ne,handleHeightChange:le,getMaxHeightAndWidth:re,alignment:oe,toggleGroupControlState:se}=(({attributes:t,setAttributes:a})=>{const[n,l]=(0,e.useState)(!1),[r,o]=(0,e.useState)(!1),[s,i]=(0,e.useState)(!1),[c,d]=(0,e.useState)(!1);return{getMaxHeightAndWidth:e=>{switch(e){case"thumbnail":return 150;case"medium":return 300;default:return 1024}},handleAlignmentChange:e=>{let n;d(e);const r=(e=>{switch(e){case"thumbnail":return 150;case"medium":return 300;default:return 1024}})(t.imageUrl);switch(e){case"left":n=.25*r+"px";break;case"center":n=.5*r+"px";break;case"right":n=.75*r+"px";break;default:n=r+"px"}o(!1),l(!0),i(!1),a({...t,widthPercentage:n,valueForWidth:!0,selectedImageTogggler:!1,widthPercentageState:!0,widthController:!1})},handleWidthChange:e=>{l(!1),i(!0);const r=`${e}px`;a({...t,ImgWidth:r,valueForWidth:n,selectedImageTogggler:!1,widthPercentageState:!1,widthController:!0})},handleResolutionChange:e=>{let n,r;switch(o(!0),e){case"thumbnail":n=150,r=150;break;case"medium":n=300,r=300;break;case"large":n=1024,r=1024;break;default:n=t?.ImgWidth,r=t?.height}const s=`${n}px`,c=`${r}px`;l(!1),i(!1),a({...t,ImgWidth:s,height:c,imageUrl:e,valueForWidth:!1,selectedImageTogggler:!0,widthPercentageState:!1,widthController:!1})},handleHeightChange:e=>{l(!1),o(!1),i(!0);const r=`${e}px`;a({...t,height:r,valueForWidth:n,selectedImageTogggler:!1,widthPercentageState:!1,widthController:!0})},toggleGroupControlState:r,widthController:s,alignment:c}})({attributes:t,setAttributes:a});let ie;switch(((t,a,n)=>{(0,e.useEffect)((()=>{const e=((e,t)=>{if(!Array.isArray(e))return console.error("data is not an array"),[];const a=[...e];return"new-to-old"===t?a.sort(((e,t)=>new Date(t.date)-new Date(e.date))):"old-to-new"===t?a.sort(((e,t)=>new Date(e.date)-new Date(t.date))):"A-Z"===t?a.sort(((e,t)=>{const a=e.title.rendered?e.title.rendered.toLowerCase():"",n=t.title.rendered?t.title.rendered.toLowerCase():"";return a.localeCompare(n)})):"Z-A"===t&&a.sort(((e,t)=>{const a=e.title.rendered?e.title.rendered.toLowerCase():"";return(t.title.rendered?t.title.rendered.toLowerCase():"").localeCompare(a)})),a})(t,a);JSON.stringify(e)!==JSON.stringify(t)&&n(e)}),[t,a,n])})(K,y,Y),(0,e.useEffect)((()=>{a({...t,height:_,showImgToggler:n,showContent:s,showPostTitle:c,showMeta:i})}),[K,p,_]),(0,e.useEffect)((()=>{k.length>0&&q(k)}),[k,A]),(0,e.useEffect)((()=>{const e=e=>e.map((e=>e.replace(/\D/g,""))).filter((e=>""!==e)).map((e=>Number(e))).sort(((e,t)=>e-t)),t=e(k),a=e(A),n=[...new Set(t)],l=[...new Set(a)],r=n.length>0&&l.length>0&&n.length===l.length&&n.every(((e,t)=>e===l[t]));H(!!r)}),[A]),(0,e.useEffect)((()=>{if("slider-layout"===W||"overlay-layout"===W){const e=K.filter((e=>e.featured_image_url.thumbnail));Z(e)}else Z([])}),[W,K]),(0,e.useEffect)((()=>{let e=[];A.length>0&&(e=K.filter((e=>!A.includes(e.id.toString()))),JSON.stringify(e)!==JSON.stringify(K)&&Y(e))}),[K,A]),W){case"slider-layout":ie=L;break;case"overlay-layout":ie=D;break;case"listing-layout":ie=$;break;case"grid-layout":ie=O;break;default:ie=j}const ce="Posts"===m?"post":"Pages"===m?"page":m.toLowerCase(),de=Q?.post_type_and_taxonomies?.[ce],me=J.length>0?J:K,ue=N?Array.isArray(me)?me.slice((R-1)*M,R*M):[]:Array.isArray(me)?me.slice(0,d):[],ge=Math.ceil(K?.length/M);return(0,e.createElement)("div",{...(0,r.useBlockProps)()},B?(0,e.createElement)(o.Notice,{status:"error",isDismissible:!1},"Please ensure IDs are not included in both the include and exclude lists."):ee?(0,e.createElement)(o.Placeholder,{label:(0,l.__)("Advanced Posts Listing","advanced-posts-listing")},(0,e.createElement)("div",null,(0,e.createElement)(o.Spinner,null),(0,e.createElement)("span",null,(0,l.__)("Loading...","advanced-posts-listing")))):0===K?.length?(0,e.createElement)(o.Placeholder,{icon:I,label:(0,l.__)("Advanced Posts Listing","advanced-posts-listing")},(0,e.createElement)("p",null,(0,l.__)("No posts were found.","advanced-posts-listing"))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(ie,{paginatedData:ue,numPostsToShow:d,showImgToggler:n,showPostTitle:c,showMeta:i,showContent:s,contentType:E,truncateContent:(e,t)=>{const a=e?.split(" ");return a.length>t?a.slice(0,t).join(" ")+"...":e},wordsLimit:u,imageUrl:v,valueForWidth:p,widthPercentage:g,widthController:b,ImgWidth:f,height:_,columnGap:C,rowGap:x,totalColoms:w,__:l.__})),K.length>0&&(0,e.createElement)("div",{className:"pagination-control",style:{marginTop:x,display:"flex",justifyContent:G}},N&&!B&&"slider-layout"!==W&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("nav",{"aria-label":"Page navigation"},(0,e.createElement)("ul",{className:"pagination"},P.length>0&&(0,e.createElement)("li",{className:"page-item "+(1===R?"disabled":"")},(0,e.createElement)("button",{className:"page-link",onClick:()=>{R>1&&F(R-1)},disabled:1===R},P)),(0,e.createElement)(T,{page:R,between:5,total:me.length,limit:M,changePage:e=>F(e),ellipsis:1,next:!1,last:!1,className:"custom-pagination"}),S.length>0&&(0,e.createElement)("li",{className:"page-item "+(R===ge?"disabled":"")},(0,e.createElement)("button",{className:"page-link",onClick:()=>{R<ge&&F(R+1)},disabled:R===ge},S)))))),(0,e.createElement)("div",null,(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.TabPanel,{className:"my-tab-panel",tabs:[{name:"Layouts",title:"Layouts",className:"tab-two"},{name:"General",title:"General",className:"tab-one"},{name:"Elements",title:"Elements",className:"tab-two"}],activeTab:U,onSelect:e=>{z(e)}},(t=>(0,e.createElement)("div",null)))),"Layouts"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Select Layout","advanced-posts-listing")},(0,e.createElement)(o.SelectControl,{className:"apgb-post-type",label:(0,l.__)("Choose A Layout","advanced-posts-listing"),value:W,onChange:e=>{a({...t,selectedLayout:e})},options:[{label:"Listing Layout",value:"listing-layout"},{label:"Grid Layout",value:"grid-layout"},{label:"Overlay Layout",value:"overlay-layout"},{label:"Masonry Layout",value:"masonry-layout"},{label:"Slider Layout",value:"slider-layout"}]})))),"General"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Posts Count","advanced-posts-listing")},(0,e.createElement)(o.RangeControl,{label:"Number of Posts",value:d,min:1,onChange:e=>{a({numPostsToShow:e}),F(1)},help:(0,l.__)("Set the maximum number of posts to display on the page","advanced-posts-listing")}))),"Layouts"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Layout Settings","advanced-posts-listing")},"listing-layout"!==W&&"slider-layout"!==W&&(0,e.createElement)("div",{className:"dashicons-before-range",style:{display:"flex",alignItems:"center"}},(0,e.createElement)("span",{class:"dashicons dashicons-grid-view",style:{marginRight:"8px",marginTop:"-33px"}}),(0,e.createElement)("div",{className:"rangeController",style:{flex:1}},(0,e.createElement)(o.RangeControl,{label:(0,l.__)("No. Of Columns","advanced-posts-listing"),value:w,max:6,min:1,onChange:e=>{a({totalColoms:e})},help:(0,l.__)("Set the number of columns to displayed in a row.","advanced-posts-listing")}))),"listing-layout"!==W&&"slider-layout"!==W&&w>1&&(0,e.createElement)("div",{className:"dashicons-before-range ",style:{display:"flex",alignItems:"center"}},(0,e.createElement)("div",{className:"dashicons dashicons-arrow-right-alt",style:{marginRight:"8px",marginTop:"-33px"}}),(0,e.createElement)("div",{className:"rangeController",style:{flex:1}},(0,e.createElement)(o.RangeControl,{label:(0,l.__)("Column Gap","advanced-posts-listing"),value:parseInt(C),max:100,min:1,onChange:e=>{a({columnGap:`${e}px`})},className:"custom-range-control",help:(0,l.__)("Set the space to be applied between columns.","advanced-posts-listing")}))),"slider-layout"!==W&&(0,e.createElement)("div",{className:"dashicons-before-range",style:{display:"flex",alignItems:"center"}},(0,e.createElement)("div",{className:"dashicons dashicons-arrow-down-alt",style:{marginRight:"8px",marginTop:"-33px"}}),(0,e.createElement)("div",{className:"rangeController",style:{flex:1}},(0,e.createElement)(o.RangeControl,{label:(0,l.__)("Row Gap","advanced-posts-listing"),value:parseInt(x),max:150,min:1,onChange:e=>{a({rowGap:`${e}px`})},className:"custom-range-control",help:(0,l.__)("Set the space to be applied between rows.","advanced-posts-listing")}))))),"General"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Data Source","advanced-posts-listing")},(0,e.createElement)(o.SelectControl,{className:"apgb-post-type",label:(0,l.__)("Post Type","advanced-posts-listing"),value:m,onChange:X,options:[{label:"Posts",value:"Posts"},{label:"Pages",value:"Pages"},...Q&&Object.keys(Q.cpt_list||{}).map((e=>({label:Q.cpt_list[e],value:e})))]}),de?.filter((e=>"Pattern Categories"!==e.label&&"Navigation Menus"!==e.label&&"Formats"!==e.label)).map(((t,a)=>{const n="Categories"===t.label?"categories":"Tags"===t.label?"tags":t?.slug.toLowerCase();return(0,e.createElement)(o.FormTokenField,{className:`apgb-filter-by-${t.label}`,key:t.label,name:n,value:h?.[n]||[],label:t.label,onChange:e=>{V(e,n,a)}})})))),"Elements"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Post Title","advanced-posts-listing")},(0,e.createElement)(o.ToggleControl,{checked:c,label:(0,l.__)("Display Post Title","advanced-posts-listing"),onChange:()=>a({showPostTitle:!c})}))),"Elements"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Post Content","advanced-posts-listing")},(0,e.createElement)(o.ToggleControl,{checked:s,label:(0,l.__)("Display Post content","advanced-posts-listing"),onChange:()=>a({showContent:!s})}),s&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.RadioControl,{label:(0,l.__)("Display :","advanced-posts-listing"),selected:E,options:[{label:"Display Excerpt",value:"Excerpt"},{label:"Display Full Post Content",value:"Full-Post"}],onChange:e=>a({contentType:e})}),"Excerpt"===E?(0,e.createElement)(o.RangeControl,{label:(0,l.__)("Max Number of Words","advanced-posts-listing"),value:u,min:10,onChange:e=>{a({wordsLimit:e})}}):null))),"Elements"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Post Meta","advanced-posts-listing")},(0,e.createElement)(o.ToggleControl,{checked:i,label:(0,l.__)("Display Post Meta Info"),onChange:()=>a({showMeta:!i})}))),"Elements"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Featured Image","advanced-posts-listing")},(0,e.createElement)(o.ToggleControl,{checked:n,label:(0,l.__)("Display featured image","advanced-posts-listing"),onChange:()=>a({showImgToggler:!n})}),n&&(0,e.createElement)("div",null,(0,e.createElement)(o.SelectControl,{label:(0,l.__)("RESOLUTION","advanced-posts-listing"),options:[{label:"Thumbnail",value:"thumbnail"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}],value:v,onChange:ne}),(0,e.createElement)("div",{style:{display:"flex",gap:"10px"}},(0,e.createElement)(o.__experimentalNumberControl,{label:(0,l.__)("Width","advanced-posts-listing"),value:parseInt(p?g:f),max:re(t.imageUrl),onChange:ae}),(0,e.createElement)(o.__experimentalNumberControl,{label:(0,l.__)("Height","advanced-posts-listing"),value:parseInt(p?g:_),max:re(t.imageUrl),onChange:le})),(0,e.createElement)("div",{style:{display:"flex",alignItems:"center"}},(0,e.createElement)("div",null,(0,e.createElement)(o.__experimentalToggleGroupControl,{label:(0,l.__)("IMAGE SIZE (%)","advanced-posts-listing"),value:!0===se?"justify":oe,style:{width:"230px"},onChange:te,help:(0,l.__)("Select the image size as a percentage.","advanced-posts-listing")},(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"left",label:"25%"}),(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"center",label:"50%"}),(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"right",label:"75%"}),(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"justify",label:"100%"}))))))),"General"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Posts Sorting","advanced-posts-listing")},(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.SelectControl,{label:(0,l.__)("SORT BY","advanced-posts-listing"),options:[{label:"Newest To Oldest",value:"new-to-old"},{label:"Oldest To Newest",value:"old-to-new"},{label:"A - Z",value:"A-Z"},{label:"Z - A",value:"Z-A"}],value:y,onChange:e=>{a({...t,sortBy:e})}})))),"General"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Include & Exclude Posts","advanced-posts-listing")},(0,e.createElement)(o.TextControl,{label:(0,l.__)("INCLUDE POSTS","advanced-posts-listing"),value:k,onChange:e=>{if(e.trim()){const n=e.split(",");F(1),a({...t,commaSeparatedIds:n})}else H(!1),a({commaSeparatedIds:[]})},help:(0,l.__)("Enter the comma seperated ids of posts Ex: 23,45,16 to be included. Only these will be displayed.","advanced-posts-listing")}),(0,e.createElement)(o.TextControl,{label:(0,l.__)("EXCLUDE POSTS","advanced-posts-listing"),value:A.join(","),onChange:e=>{if(e.trim()){const n=e.split(",");a({...t,RemoveCommaSeparatedIds:n})}else F(1),a({...t,RemoveCommaSeparatedIds:[]})},help:(0,l.__)("Enter the comma seperated ids of posts to be excluded from result set Ex: 23,45","advanced-posts-listing")}))),"General"===U&&(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(o.PanelBody,{title:(0,l.__)("Pagination Settings","advanced-posts-listing")},(0,e.createElement)(o.ToggleControl,{checked:!!N,label:(0,l.__)("Turn on pagination","advanced-posts-listing"),onChange:()=>a({PaginationOnToggler:!N})}),N&&(0,e.createElement)(o.TextControl,{label:(0,l.__)("Add Prev Label","advanced-posts-listing"),value:P,onChange:e=>a({prevName:e}),help:(0,l.__)("Text for the previous page button.","advanced-posts-listing")}),N&&(0,e.createElement)(o.TextControl,{label:(0,l.__)("Add Next Label","advanced-posts-listing"),value:S,onChange:e=>a({nextName:e}),help:(0,l.__)("Text for the next page button.","advanced-posts-listing")}),N&&(0,e.createElement)("div",{style:{display:"flex",alignItems:"center"}},(0,e.createElement)("div",null,(0,e.createElement)(o.__experimentalToggleGroupControl,{label:(0,l.__)("Pagination Alignment","advanced-posts-listing"),value:G,style:{width:"230px"},onChange:e=>{a({...t,paginationAline:e})},help:(0,l.__)("Select the alignment for pagination controls.","advanced-posts-listing")},(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"left",label:"Left"}),(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"center",label:"Center"}),(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"right",label:"Right"})))))))}})})()})();